@extends('layouts.app')

@section('title', 'Gestion des Entreprises')

@section('styles')
<style>
/* ===================================
   ANIMATIONS & KEYFRAMES
   =================================== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ===================================
   PAGE CONTAINER & LAYOUT
   =================================== */
.entreprises-page {
    padding: 32px;
    max-width: 1920px;
    margin: 0 auto;
    min-height: 100vh;
    animation: fadeIn 0.6s ease;
}

/* ===================================
   HERO SECTION ULTRA MODERN
   =================================== */
.hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 28px;
    padding: 56px 64px;
    margin-bottom: 32px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 24px 80px rgba(102, 126, 234, 0.35);
    animation: fadeInUp 0.6s ease;
}

/* Decorative Elements */
.hero-decoration-1 {
    position: absolute;
    top: -100px;
    right: -100px;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.12) 0%, transparent 70%);
    border-radius: 50%;
    animation: float 8s ease-in-out infinite;
}

.hero-decoration-2 {
    position: absolute;
    bottom: -150px;
    left: -150px;
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
    border-radius: 50%;
    animation: float 10s ease-in-out infinite reverse;
}

.hero-decoration-3 {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 600px;
    height: 600px;
    background: conic-gradient(from 0deg, rgba(255, 255, 255, 0.05), transparent);
    border-radius: 50%;
    animation: spin 30s linear infinite;
    opacity: 0.3;
}

.hero-content {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 48px;
}

.hero-left {
    flex: 1;
    display: flex;
    gap: 24px;
    align-items: flex-start;
}

.hero-icon-wrapper {
    position: relative;
    flex-shrink: 0;
}

.hero-icon-inner {
    width: 88px;
    height: 88px;
    background: rgba(255, 255, 255, 0.18);
    border-radius: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(20px);
    border: 2px solid rgba(255, 255, 255, 0.25);
    animation: float 4s ease-in-out infinite;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

.hero-icon-inner svg {
    color: #ffffff;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
}

.hero-text {
    flex: 1;
}

.hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50px;
    padding: 6px 16px;
    font-size: 0.8125rem;
    font-weight: 600;
    color: #ffffff;
    margin-bottom: 16px;
    animation: slideInRight 0.6s ease 0.2s both;
}

.hero-badge svg {
    animation: spin 3s linear infinite;
}

.hero-title {
    font-size: 2.75rem;
    font-weight: 800;
    color: #ffffff;
    margin: 0 0 16px 0;
    text-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    letter-spacing: -1.5px;
    line-height: 1.1;
    animation: fadeInUp 0.6s ease 0.3s both;
}

.hero-subtitle {
    font-size: 1.0625rem;
    color: rgba(255, 255, 255, 0.92);
    margin: 0 0 32px 0;
    font-weight: 400;
    line-height: 1.6;
    max-width: 580px;
    animation: fadeInUp 0.6s ease 0.4s both;
}

.hero-actions {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    animation: fadeInUp 0.6s ease 0.5s both;
}

/* ===================================
   HERO BUTTONS MODERN
   =================================== */
.btn-hero {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 16px 32px;
    border-radius: 16px;
    font-size: 0.9375rem;
    font-weight: 700;
    border: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    text-decoration: none;
}

.btn-hero-primary {
    background: #ffffff;
    color: #667eea;
    box-shadow: 0 8px 24px rgba(255, 255, 255, 0.25);
}

.btn-hero-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(255, 255, 255, 0.35);
    background: #f8f9ff;
}

.btn-hero-secondary {
    background: rgba(255, 255, 255, 0.12);
    color: #ffffff;
    border: 2px solid rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
}

.btn-hero-secondary:hover {
    background: rgba(255, 255, 255, 0.18);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
}

.btn-icon {
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-text {
    position: relative;
    z-index: 1;
}

.btn-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.3), transparent);
    transition: left 0.5s ease;
}

.btn-hero-primary:hover .btn-shine {
    left: 100%;
}

/* ===================================
   STATS CARDS MODERN
   =================================== */
.stats-grid-modern {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    flex-shrink: 0;
}

.stat-card-modern {
    background: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 24px 20px;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 160px;
}

.stat-card-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.stat-card-modern:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.25);
    border-color: rgba(255, 255, 255, 0.35);
}

.stat-card-modern:hover .stat-card-bg {
    opacity: 1;
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    position: relative;
    z-index: 1;
}

.stat-icon-modern {
    width: 44px;
    height: 44px;
    background: rgba(255, 255, 255, 0.18);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.stat-trend {
    font-size: 0.75rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.85);
    background: rgba(255, 255, 255, 0.12);
    padding: 4px 10px;
    border-radius: 20px;
    backdrop-filter: blur(10px);
}

.stat-value-modern {
    font-size: 2.5rem;
    font-weight: 900;
    color: #ffffff;
    margin: 0 0 8px 0;
    line-height: 1;
    text-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    position: relative;
    z-index: 1;
}

.stat-label-modern {
    font-size: 0.8125rem;
    color: rgba(255, 255, 255, 0.88);
    margin: 0 0 12px 0;
    font-weight: 600;
    letter-spacing: 0.3px;
    position: relative;
    z-index: 1;
}

.stat-progress {
    height: 4px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
    z-index: 1;
}

.stat-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #ffffff 0%, rgba(255, 255, 255, 0.7) 100%);
    border-radius: 4px;
    transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

/* ===================================
   PREMIUM BUTTONS
   =================================== */
.btn-premium {
    padding: 14px 32px;
    border-radius: 14px;
    font-size: 0.938rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    letter-spacing: 0.3px;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
}

.btn-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    transition: left 0.6s ease;
}

.btn-premium:hover::before {
    left: 100%;
}

.btn-premium-primary {
    background: rgba(255, 255, 255, 0.25);
    color: #ffffff;
    border-color: rgba(255, 255, 255, 0.4);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(10px);
}

.btn-premium-primary:hover {
    background: rgba(255, 255, 255, 0.35);
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
}

.btn-premium-secondary {
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border-color: rgba(255, 255, 255, 0.25);
}

.btn-premium-secondary:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

/* ===================================
   TOOLBAR WITH FILTERS
   =================================== */
.toolbar-section {
    margin-bottom: 32px;
    animation: fadeInUp 0.7s ease;
}

.toolbar-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 24px 28px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
    backdrop-filter: blur(20px);
}

.toolbar-top {
    display: flex;
    gap: 16px;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 20px;
}

.search-box-premium {
    position: relative;
    flex: 1;
    min-width: 300px;
}

.search-icon-premium {
    position: absolute;
    left: 18px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    pointer-events: none;
    z-index: 1;
}

.search-input-premium {
    width: 100%;
    padding: 14px 20px 14px 52px;
    border: 2px solid var(--card-border);
    border-radius: 14px;
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: 0.938rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
    font-weight: 500;
}

.search-input-premium:hover {
    border-color: rgba(102, 126, 234, 0.3);
    background: var(--card-bg);
}

.search-input-premium:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
    background: var(--card-bg);
    transform: translateY(-1px);
}

.search-input-premium::placeholder {
    color: var(--text-muted);
    font-weight: 400;
}

.view-toggle-group {
    display: flex;
    gap: 8px;
    background: var(--bg-secondary);
    padding: 6px;
    border-radius: 12px;
    border: 1px solid var(--card-border);
}

.view-toggle-btn {
    padding: 10px 16px;
    border: none;
    background: transparent;
    color: var(--text-muted);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 0.875rem;
}

.view-toggle-btn:hover {
    color: var(--text-primary);
    background: rgba(102, 126, 234, 0.1);
}

.view-toggle-btn.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

/* Filter Chips */
.filter-chips {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.filter-chip {
    padding: 10px 20px;
    border-radius: 24px;
    background: var(--bg-secondary);
    border: 2px solid var(--card-border);
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-transform: capitalize;
}

.filter-chip:hover {
    border-color: rgba(102, 126, 234, 0.4);
    background: var(--card-bg);
    transform: translateY(-1px);
}

.filter-chip.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    border-color: transparent;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.filter-chip .chip-count {
    background: rgba(255, 255, 255, 0.2);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 700;
}

.filter-chip.active .chip-count {
    background: rgba(255, 255, 255, 0.3);
}

/* ===================================
   COMPANIES GRID VIEW
   =================================== */
.companies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    gap: 24px;
    animation: fadeIn 0.5s ease;
}

.company-card {
    background: var(--card-bg);
    border: 2px solid var(--card-border);
    border-radius: 20px;
    padding: 28px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    animation: fadeInUp 0.5s ease backwards;
}

.company-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.company-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
    border-color: rgba(102, 126, 234, 0.3);
}

.dark .company-card:hover {
    box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
}

.company-card:hover::before {
    transform: scaleX(1);
}

/* Stagger animation for cards */
.company-card:nth-child(1) { animation-delay: 0.05s; }
.company-card:nth-child(2) { animation-delay: 0.1s; }
.company-card:nth-child(3) { animation-delay: 0.15s; }
.company-card:nth-child(4) { animation-delay: 0.2s; }
.company-card:nth-child(5) { animation-delay: 0.25s; }
.company-card:nth-child(6) { animation-delay: 0.3s; }

.company-card-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 20px;
}

.company-logo-wrapper {
    flex-shrink: 0;
}

.company-logo {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    object-fit: cover;
    border: 3px solid var(--card-border);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.company-card:hover .company-logo {
    transform: scale(1.05) rotate(2deg);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.company-logo-placeholder {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    font-weight: 900;
    font-size: 1.375rem;
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    transition: all 0.3s ease;
    letter-spacing: -0.5px;
}

.company-card:hover .company-logo-placeholder {
    transform: scale(1.05) rotate(-2deg);
    box-shadow: 0 12px 28px rgba(102, 126, 234, 0.5);
}

.company-card-info {
    flex: 1;
    min-width: 0;
}

.company-card-name {
    font-size: 1.25rem;
    font-weight: 800;
    color: var(--text-primary);
    margin: 0 0 6px 0;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    letter-spacing: -0.3px;
}

.company-card-sigle {
    font-size: 0.875rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.company-card-status {
    position: absolute;
    top: 20px;
    right: 20px;
}

.company-card-body {
    margin-bottom: 20px;
}

.company-detail-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid var(--card-border);
}

.company-detail-row:last-child {
    border-bottom: none;
}

.company-detail-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: rgba(102, 126, 234, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #667eea;
    flex-shrink: 0;
}

.company-detail-content {
    flex: 1;
    min-width: 0;
}

.company-detail-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 2px;
}

.company-detail-value {
    font-size: 0.938rem;
    color: var(--text-primary);
    font-weight: 600;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.company-card-footer {
    display: flex;
    gap: 8px;
    padding-top: 20px;
    border-top: 2px solid var(--card-border);
}

.btn-action-card {
    flex: 1;
    padding: 12px 20px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 700;
    font-size: 0.875rem;
    text-decoration: none;
}

.btn-action-view-card {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    border-color: rgba(59, 130, 246, 0.2);
}

.btn-action-view-card:hover {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
}

.btn-action-edit-card {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
    border-color: rgba(16, 185, 129, 0.2);
}

.btn-action-edit-card:hover {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
}

.btn-action-delete-card {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border-color: rgba(239, 68, 68, 0.2);
    flex: 0 0 auto;
    padding: 12px 16px;
}

.btn-action-delete-card:hover {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
}

/* ===================================
   BADGE PREMIUM
   =================================== */
.badge-premium {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    border-radius: 24px;
    font-size: 0.75rem;
    font-weight: 700;
    white-space: nowrap;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease;
}

.badge-premium::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: currentColor;
    animation: pulse 2s ease-in-out infinite;
}

.badge-premium:hover {
    transform: translateY(-1px) scale(1.05);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.badge-active {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: #ffffff;
}

.badge-inactive {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: #ffffff;
}

/* ===================================
   TABLE VIEW (PREMIUM)
   =================================== */
.companies-table-view {
    animation: fadeIn 0.5s ease;
}

.table-card-premium {
    background: var(--card-bg);
    border: 2px solid var(--card-border);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
}

.table-container-premium {
    overflow-x: auto;
}

.table-container-premium::-webkit-scrollbar {
    height: 10px;
}

.table-container-premium::-webkit-scrollbar-track {
    background: var(--bg-tertiary);
    border-radius: 5px;
}

.table-container-premium::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 5px;
}

.table-container-premium::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
}

.table-premium {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

.table-premium thead {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    position: sticky;
    top: 0;
    z-index: 10;
}

.table-premium th {
    padding: 20px 24px;
    text-align: left;
    font-size: 0.813rem;
    font-weight: 700;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    white-space: nowrap;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.table-premium tbody tr {
    border-bottom: 1px solid var(--card-border);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: fadeInUp 0.4s ease backwards;
}

.table-premium tbody tr:nth-child(1) { animation-delay: 0.05s; }
.table-premium tbody tr:nth-child(2) { animation-delay: 0.1s; }
.table-premium tbody tr:nth-child(3) { animation-delay: 0.15s; }
.table-premium tbody tr:nth-child(4) { animation-delay: 0.2s; }
.table-premium tbody tr:nth-child(5) { animation-delay: 0.25s; }

.table-premium tbody tr:hover {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transform: scale(1.01);
}

.dark .table-premium tbody tr:hover {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%);
    box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
}

.table-premium tbody tr:last-child {
    border-bottom: none;
}

.table-premium td {
    padding: 20px 24px;
    color: var(--text-primary);
    font-size: 0.938rem;
    vertical-align: middle;
}

/* Company Cell in Table */
.company-cell {
    display: flex;
    align-items: center;
    gap: 16px;
}

.company-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.company-name {
    font-weight: 800;
    color: var(--text-primary);
    font-size: 0.938rem;
    letter-spacing: -0.2px;
}

.company-sigle {
    font-size: 0.813rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

/* Contact & Location Info */
.contact-info,
.location-info {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.contact-email,
.location-city {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.938rem;
}

.contact-phone,
.location-country {
    font-size: 0.813rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 6px;
    font-weight: 500;
}

/* Action Buttons in Table */
.action-buttons-group {
    display: flex;
    gap: 8px;
    align-items: center;
}

.btn-action {
    width: 42px;
    height: 42px;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: rgba(148, 163, 184, 0.1);
    color: #64748b;
}

.btn-action:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.btn-action-view {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
}

.btn-action-view:hover {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: #ffffff;
    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
}

.btn-action-edit {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
}

.btn-action-edit:hover {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: #ffffff;
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.3);
}

.btn-action-delete {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

.btn-action-delete:hover {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: #ffffff;
    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.3);
}

/* ===================================
   EMPTY STATE
   =================================== */
.empty-state-premium {
    text-align: center;
    padding: 100px 40px;
    animation: fadeInUp 0.6s ease;
}

.empty-icon-wrapper {
    width: 140px;
    height: 140px;
    margin: 0 auto 32px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: float 3s ease-in-out infinite;
}

.empty-icon-premium {
    width: 80px;
    height: 80px;
    color: #667eea;
    opacity: 0.6;
}

.empty-title-premium {
    font-size: 2rem;
    font-weight: 900;
    color: var(--text-primary);
    margin-bottom: 16px;
    letter-spacing: -0.5px;
}

.empty-description-premium {
    color: var(--text-muted);
    font-size: 1.125rem;
    margin-bottom: 32px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
}

.empty-action {
    margin-top: 16px;
}

/* ===================================
   LOADING SKELETON
   =================================== */
.skeleton {
    background: linear-gradient(
        90deg,
        var(--bg-secondary) 0%,
        var(--bg-tertiary) 50%,
        var(--bg-secondary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 8px;
}

.skeleton-card {
    padding: 28px;
    background: var(--card-bg);
    border: 2px solid var(--card-border);
    border-radius: 20px;
}

.skeleton-avatar {
    width: 64px;
    height: 64px;
    border-radius: 16px;
}

.skeleton-text {
    height: 16px;
    margin-bottom: 8px;
}

.skeleton-text.large {
    height: 24px;
}

/* ===================================
   NOTIFICATIONS
   =================================== */
.notification-modern {
    padding: 18px 28px;
    border-radius: 16px;
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 16px;
    animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
}

.notification-success {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.1) 100%);
    border-left: 4px solid #10b981;
    color: #10b981;
    border: 2px solid rgba(16, 185, 129, 0.3);
}

.notification-error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(220, 38, 38, 0.1) 100%);
    border-left: 4px solid #ef4444;
    color: #ef4444;
    border: 2px solid rgba(239, 68, 68, 0.3);
}

.notification-icon {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.2);
    flex-shrink: 0;
}

.notification-content {
    flex: 1;
    font-weight: 600;
    font-size: 0.938rem;
}

/* ===================================
   MODAL OVERLAY
   =================================== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 20px;
}

.modal-overlay.show {
    opacity: 1;
    visibility: visible;
}

/* ===================================
   MODAL CONTENT ULTRA-PREMIUM
   =================================== */
.modal-content-premium {
    background: var(--card-bg);
    border-radius: 28px;
    width: 100%;
    max-width: 1000px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 30px 80px -12px rgba(0, 0, 0, 0.6);
    transform: scale(0.9) translateY(40px);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    border: 3px solid rgba(102, 126, 234, 0.2);
}

.modal-overlay.show .modal-content-premium {
    transform: scale(1) translateY(0);
    opacity: 1;
}

/* ===================================
   MODAL HEADER ULTRA-PREMIUM
   =================================== */
.modal-header-premium {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 36px 40px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 4px solid rgba(255, 255, 255, 0.15);
    position: relative;
    overflow: hidden;
}

.modal-header-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
    pointer-events: none;
}

.modal-header-content {
    display: flex;
    align-items: center;
    gap: 20px;
    position: relative;
    z-index: 1;
}

.modal-header-icon {
    width: 68px;
    height: 68px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    backdrop-filter: blur(10px);
    border: 3px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.2);
    flex-shrink: 0;
}

.modal-title-premium {
    font-size: 2rem;
    font-weight: 900;
    color: #ffffff;
    margin: 0;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    letter-spacing: -0.5px;
}

.modal-subtitle-premium {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.9);
    margin: 6px 0 0 0;
    font-weight: 500;
}

.modal-close-premium {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    background: rgba(255, 255, 255, 0.2);
    border: 3px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 1;
}

.modal-close-premium:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg) scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
}

/* ===================================
   MODAL BODY ULTRA-PREMIUM
   =================================== */
.modal-body-premium {
    padding: 40px;
    overflow-y: auto;
    flex: 1;
}

.modal-body-premium::-webkit-scrollbar {
    width: 10px;
}

.modal-body-premium::-webkit-scrollbar-track {
    background: var(--bg-tertiary);
    border-radius: 5px;
}

.modal-body-premium::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 5px;
}

.modal-body-premium::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
}

/* ===================================
   FORM SECTIONS
   =================================== */
.form-section-premium {
    margin-bottom: 32px;
    padding-bottom: 32px;
    border-bottom: 2px solid var(--card-border);
}

.form-section-premium:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.section-title-premium {
    font-size: 1.25rem;
    font-weight: 800;
    color: var(--text-primary);
    margin: 0 0 24px 0;
    display: flex;
    align-items: center;
    gap: 12px;
    letter-spacing: -0.3px;
}

.section-title-premium svg {
    color: #667eea;
    flex-shrink: 0;
}

/* ===================================
   FORM GRID
   =================================== */
.form-grid-premium {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 20px;
}

.form-grid-premium:last-child {
    margin-bottom: 0;
}

.form-group-premium {
    margin-bottom: 0;
}

.form-group-premium.full-width {
    grid-column: 1 / -1;
}

/* ===================================
   FORM LABELS & INPUTS
   =================================== */
.form-label-premium {
    display: block;
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--text-secondary);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.form-label-premium.required::after {
    content: '*';
    color: #ef4444;
    margin-left: 6px;
    font-weight: 900;
}

.form-input-premium {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid var(--card-border);
    border-radius: 12px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    font-size: 0.938rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
    font-weight: 500;
}

.form-input-premium:hover {
    border-color: rgba(102, 126, 234, 0.3);
    background: var(--card-bg);
}

.form-input-premium:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
    background: var(--card-bg);
    transform: translateY(-1px);
}

.form-input-premium::placeholder {
    color: var(--text-muted);
    font-weight: 400;
}

textarea.form-input-premium {
    resize: vertical;
    min-height: 120px;
    font-family: inherit;
}

/* Error & Success States */
.form-input-premium.error {
    border-color: #ef4444;
    background: rgba(239, 68, 68, 0.05);
}

.form-input-premium.success {
    border-color: #10b981;
    background: rgba(16, 185, 129, 0.05);
}

/* ===================================
   FORM ERROR MESSAGES
   =================================== */
.form-error {
    font-size: 0.813rem;
    color: #ef4444;
    font-weight: 600;
    margin-top: 8px;
    display: block;
    min-height: 20px;
}

/* ===================================
   MODAL FOOTER
   =================================== */
.modal-footer-premium {
    padding: 28px 40px;
    background: var(--bg-tertiary);
    border-top: 2px solid var(--card-border);
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 12px;
}

.btn-cancel-premium {
    padding: 14px 28px;
    border-radius: 12px;
    font-size: 0.938rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid var(--card-border);
    background: transparent;
    color: var(--text-primary);
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

.btn-cancel-premium:hover {
    background: var(--bg-secondary);
    border-color: var(--text-muted);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.btn-submit-premium {
    padding: 14px 32px;
    border-radius: 12px;
    font-size: 0.938rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
    position: relative;
    overflow: hidden;
}

.btn-submit-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    transition: left 0.6s ease;
}

.btn-submit-premium:hover::before {
    left: 100%;
}

.btn-submit-premium:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 36px rgba(102, 126, 234, 0.5);
}

.btn-submit-premium:active {
    transform: translateY(-1px);
}

.btn-submit-premium:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.animate-spin {
    animation: spin 1s linear infinite;
}

/* ===================================
   SUCCESS NOTIFICATION
   =================================== */
.success-notification-entreprise {
    position: fixed;
    top: 28px;
    right: 28px;
    z-index: 100000;
    background: var(--card-bg);
    border-radius: 24px;
    box-shadow: 0 30px 80px -12px rgba(0, 0, 0, 0.6);
    border: 3px solid rgba(16, 185, 129, 0.4);
    overflow: hidden;
    min-width: 450px;
    max-width: 550px;
    transform: translateX(120%) scale(0.8);
    opacity: 0;
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.success-notification-entreprise.show {
    transform: translateX(0) scale(1);
    opacity: 1;
}

.success-notification-content {
    display: flex;
    align-items: flex-start;
    gap: 24px;
    padding: 28px;
}

.success-icon-wrapper {
    flex-shrink: 0;
    width: 72px;
    height: 72px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: successIconBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 10px 32px rgba(16, 185, 129, 0.4);
}

.success-icon {
    color: #ffffff;
    animation: successIconCheck 0.8s ease;
}

.success-text {
    flex: 1;
}

.success-title {
    font-size: 1.375rem;
    font-weight: 900;
    color: var(--text-primary);
    margin: 0 0 10px 0;
    letter-spacing: -0.4px;
}

.success-details {
    font-size: 1rem;
    color: var(--text-secondary);
    margin: 0 0 14px 0;
    line-height: 1.6;
    font-weight: 500;
}

.success-details strong {
    color: var(--text-primary);
    font-weight: 800;
}

.success-meta {
    font-size: 0.875rem;
    color: var(--text-muted);
    font-weight: 600;
}

.success-reload {
    font-size: 0.813rem;
    color: var(--text-muted);
    font-style: italic;
    margin: 0;
}

.success-progress {
    height: 5px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    width: 100%;
    transition: width 1.8s linear;
}

@keyframes successIconBounce {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.15);
    }
}

@keyframes successIconCheck {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.3);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* ===================================
   RESPONSIVE DESIGN
   =================================== */
@media (max-width: 1400px) {
    .companies-grid {
        grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    }
}

@media (max-width: 1400px) {
    .stats-grid-modern {
        grid-template-columns: repeat(2, 1fr);
    }

    .hero-content {
        flex-direction: column;
    }
}

@media (max-width: 1024px) {
    .hero-section {
        padding: 44px 48px;
    }

    .hero-title {
        font-size: 2.25rem;
    }

    .hero-subtitle {
        font-size: 1rem;
    }

    .stats-grid-modern {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }

    .companies-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
}

@media (max-width: 768px) {
    .entreprises-page {
        padding: 20px;
    }

    .hero-section {
        padding: 32px 28px;
        border-radius: 20px;
    }

    .hero-left {
        flex-direction: column;
        gap: 20px;
    }

    .hero-icon-inner {
        width: 72px;
        height: 72px;
    }

    .hero-title {
        font-size: 1.875rem;
        letter-spacing: -1px;
    }

    .hero-subtitle {
        font-size: 0.9375rem;
        margin-bottom: 24px;
    }

    .hero-actions {
        flex-direction: column;
        width: 100%;
    }

    .btn-hero {
        width: 100%;
        justify-content: center;
        padding: 14px 24px;
    }

    .stats-grid-modern {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    .stat-card-modern {
        padding: 20px 16px;
    }

    .stat-value-modern {
        font-size: 2rem;
    }

    .stat-label-modern {
        font-size: 0.75rem;
    }

    .toolbar-card {
        padding: 20px;
    }

    .toolbar-top {
        flex-direction: column;
        align-items: stretch;
    }

    .search-box-premium {
        min-width: 100%;
    }

    .view-toggle-group {
        width: 100%;
    }

    .view-toggle-btn {
        flex: 1;
        justify-content: center;
    }

    .companies-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .modal-content-premium {
        max-width: 95%;
        max-height: 95vh;
        border-radius: 20px;
    }

    .modal-header-premium {
        padding: 24px;
    }

    .modal-header-icon {
        width: 56px;
        height: 56px;
    }

    .modal-title-premium {
        font-size: 1.5rem;
    }

    .modal-body-premium {
        padding: 24px;
    }

    .form-grid-premium {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .modal-footer-premium {
        padding: 20px 24px;
        flex-direction: column-reverse;
    }

    .btn-cancel-premium,
    .btn-submit-premium {
        width: 100%;
        justify-content: center;
    }

    .success-notification-entreprise {
        top: 16px;
        right: 16px;
        left: 16px;
        min-width: auto;
    }

    .table-premium th,
    .table-premium td {
        padding: 16px;
        font-size: 0.875rem;
    }

    .company-card-footer {
        flex-direction: column;
    }

    .btn-action-delete-card {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 1.75rem;
    }

    .hero-icon-wrapper {
        width: 56px;
        height: 56px;
    }

    .stats-grid {
        grid-template-columns: 1fr;
    }

    .filter-chips {
        flex-direction: column;
    }

    .filter-chip {
        width: 100%;
        justify-content: center;
    }
}

/* Dark Mode Adjustments */
.dark .hero-section {
    background: linear-gradient(135deg, #4c51bf 0%, #553c9a 100%);
    box-shadow: 0 20px 60px rgba(76, 81, 191, 0.4);
}

.dark .modal-header-premium {
    background: linear-gradient(135deg, #4c51bf 0%, #553c9a 100%);
}

.dark .company-card {
    background: rgba(255, 255, 255, 0.02);
}

.dark .notification-modern {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}
</style>
@endsection

@section('content')
<div class="entreprises-page">
    <!-- Hero Section with Stats - Ultra Modern -->
    <div class="hero-section">
        <!-- Decorative Background Elements -->
        <div class="hero-decoration-1"></div>
        <div class="hero-decoration-2"></div>
        <div class="hero-decoration-3"></div>

        <div class="hero-content">
            <div class="hero-left">
                <div class="hero-icon-wrapper">
                    <div class="hero-icon-inner">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                    </div>
                </div>
                <div class="hero-text">
                    <div class="hero-badge">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        Gestion en temps réel
                    </div>
                    <h1 class="hero-title">Entreprises Partenaires</h1>
                    <p class="hero-subtitle">Gérez l'ensemble de vos entreprises partenaires avec une interface moderne et intuitive. Suivez les performances en temps réel.</p>
                    <div class="hero-actions">
                        <button type="button" onclick="openCreateEntrepriseModal()" class="btn-hero btn-hero-primary">
                            <span class="btn-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </span>
                            <span class="btn-text">Nouvelle Entreprise</span>
                            <span class="btn-shine"></span>
                        </button>
                        <button type="button" class="btn-hero btn-hero-secondary" onclick="window.print()">
                            <span class="btn-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                            </span>
                            <span class="btn-text">Exporter</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Stats Cards - Modern Design -->
            <div class="stats-grid-modern">
                <div class="stat-card-modern stat-total">
                    <div class="stat-card-bg"></div>
                    <div class="stat-header">
                        <div class="stat-icon-modern">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16"></path>
                            </svg>
                        </div>
                        <span class="stat-trend">+{{ $entreprises->count() }}</span>
                    </div>
                    <div class="stat-value-modern">{{ $entreprises->count() }}</div>
                    <div class="stat-label-modern">Total Entreprises</div>
                    <div class="stat-progress">
                        <div class="stat-progress-bar" style="width: 100%"></div>
                    </div>
                </div>

                <div class="stat-card-modern stat-active">
                    <div class="stat-card-bg"></div>
                    <div class="stat-header">
                        <div class="stat-icon-modern">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                        </div>
                        <span class="stat-trend">{{ $entreprises->count() > 0 ? round(($entreprises->where('is_active', true)->count() / $entreprises->count()) * 100) : 0 }}%</span>
                    </div>
                    <div class="stat-value-modern">{{ $entreprises->where('is_active', true)->count() }}</div>
                    <div class="stat-label-modern">Entreprises Actives</div>
                    <div class="stat-progress">
                        <div class="stat-progress-bar" style="width: {{ $entreprises->count() > 0 ? ($entreprises->where('is_active', true)->count() / $entreprises->count()) * 100 : 0 }}%"></div>
                    </div>
                </div>

                <div class="stat-card-modern stat-inactive">
                    <div class="stat-card-bg"></div>
                    <div class="stat-header">
                        <div class="stat-icon-modern">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="15" y1="9" x2="9" y2="15"></line>
                                <line x1="9" y1="9" x2="15" y2="15"></line>
                            </svg>
                        </div>
                        <span class="stat-trend">{{ $entreprises->where('is_active', false)->count() }}</span>
                    </div>
                    <div class="stat-value-modern">{{ $entreprises->where('is_active', false)->count() }}</div>
                    <div class="stat-label-modern">Inactives</div>
                    <div class="stat-progress">
                        <div class="stat-progress-bar" style="width: {{ $entreprises->count() > 0 ? ($entreprises->where('is_active', false)->count() / $entreprises->count()) * 100 : 0 }}%"></div>
                    </div>
                </div>

                <div class="stat-card-modern stat-employees">
                    <div class="stat-card-bg"></div>
                    <div class="stat-header">
                        <div class="stat-icon-modern">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <span class="stat-trend">Total</span>
                    </div>
                    <div class="stat-value-modern">{{ number_format($entreprises->sum('nombre_employes') ?? 0) }}</div>
                    <div class="stat-label-modern">Employés</div>
                    <div class="stat-progress">
                        <div class="stat-progress-bar" style="width: 85%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success/Error Messages -->
    @if(session('success'))
    <div class="notification-modern notification-success">
        <div class="notification-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        </div>
        <div class="notification-content">{{ session('success') }}</div>
    </div>
    @endif

    @if(session('error'))
    <div class="notification-modern notification-error">
        <div class="notification-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        </div>
        <div class="notification-content">{{ session('error') }}</div>
    </div>
    @endif

    <!-- Toolbar with Search & Filters -->
    <div class="toolbar-section">
        <div class="toolbar-card">
            <div class="toolbar-top">
                <div class="search-box-premium">
                    <svg class="search-icon-premium" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="search" class="search-input-premium" placeholder="Rechercher par nom, email, ville, pays..." id="searchInput">
                </div>

                <div class="view-toggle-group">
                    <button type="button" class="view-toggle-btn active" id="gridViewBtn" onclick="switchView('grid')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                        Grille
                    </button>
                    <button type="button" class="view-toggle-btn" id="tableViewBtn" onclick="switchView('table')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <line x1="3" y1="6" x2="3.01" y2="6"></line>
                            <line x1="3" y1="12" x2="3.01" y2="12"></line>
                            <line x1="3" y1="18" x2="3.01" y2="18"></line>
                        </svg>
                        Liste
                    </button>
                </div>
            </div>

            <div class="filter-chips">
                <button class="filter-chip active" data-filter="all" onclick="filterCompanies('all')">
                    <span>Toutes</span>
                    <span class="chip-count">{{ $entreprises->count() }}</span>
                </button>
                <button class="filter-chip" data-filter="active" onclick="filterCompanies('active')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span>Actives</span>
                    <span class="chip-count">{{ $entreprises->where('is_active', true)->count() }}</span>
                </button>
                <button class="filter-chip" data-filter="inactive" onclick="filterCompanies('inactive')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                    </svg>
                    <span>Inactives</span>
                    <span class="chip-count">{{ $entreprises->where('is_active', false)->count() }}</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Companies Grid View -->
    <div class="companies-grid" id="companiesGrid">
        @forelse($entreprises as $entreprise)
        <div class="company-card" data-status="{{ $entreprise->is_active ? 'active' : 'inactive' }}">
            <div class="company-card-status">
                @if($entreprise->is_active)
                <span class="badge-premium badge-active">Active</span>
                @else
                <span class="badge-premium badge-inactive">Inactive</span>
                @endif
            </div>

            <div class="company-card-header">
                <div class="company-logo-wrapper">
                    @if($entreprise->logo)
                    <img src="{{ asset($entreprise->logo) }}" alt="{{ $entreprise->nom }}" class="company-logo">
                    @else
                    <div class="company-logo-placeholder">
                        {{ strtoupper(substr($entreprise->nom, 0, 2)) }}
                    </div>
                    @endif
                </div>
                <div class="company-card-info">
                    <h3 class="company-card-name">{{ $entreprise->nom }}</h3>
                    @if($entreprise->sigle)
                    <p class="company-card-sigle">{{ $entreprise->sigle }}</p>
                    @endif
                </div>
            </div>

            <div class="company-card-body">
                <div class="company-detail-row">
                    <div class="company-detail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </div>
                    <div class="company-detail-content">
                        <div class="company-detail-label">Email</div>
                        <div class="company-detail-value">{{ $entreprise->email }}</div>
                    </div>
                </div>

                @if($entreprise->telephone)
                <div class="company-detail-row">
                    <div class="company-detail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                    </div>
                    <div class="company-detail-content">
                        <div class="company-detail-label">Téléphone</div>
                        <div class="company-detail-value">{{ $entreprise->telephone }}</div>
                    </div>
                </div>
                @endif

                <div class="company-detail-row">
                    <div class="company-detail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                    </div>
                    <div class="company-detail-content">
                        <div class="company-detail-label">Localisation</div>
                        <div class="company-detail-value">{{ $entreprise->ville ?? $entreprise->pays }}</div>
                    </div>
                </div>

                <div class="company-detail-row">
                    <div class="company-detail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        </svg>
                    </div>
                    <div class="company-detail-content">
                        <div class="company-detail-label">Employés</div>
                        <div class="company-detail-value">{{ $entreprise->nombre_employes ?? 'N/A' }}</div>
                    </div>
                </div>
            </div>

            <div class="company-card-footer">
                <a href="{{ route('entreprises.show', $entreprise->id) }}" class="btn-action-card btn-action-view-card">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    Voir
                </a>
                <button type="button" onclick="openEditEntrepriseModal({{ $entreprise->id }})" class="btn-action-card btn-action-edit-card">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                    </svg>
                    Modifier
                </button>
                <form action="{{ route('entreprises.destroy', $entreprise->id) }}" method="POST" style="display: inline-block;" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette entreprise ?');">
                    @csrf
                    @method('DELETE')
                    <button type="submit" class="btn-action-card btn-action-delete-card">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
        @empty
        <div class="empty-state-premium" style="grid-column: 1 / -1;">
            <div class="empty-icon-wrapper">
                <svg class="empty-icon-premium" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                </svg>
            </div>
            <h3 class="empty-title-premium">Aucune entreprise enregistrée</h3>
            <p class="empty-description-premium">Commencez par créer votre première entreprise pour gérer vos partenaires</p>
            <div class="empty-action">
                <button type="button" onclick="openCreateEntrepriseModal()" class="btn-premium btn-premium-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Créer une entreprise
                </button>
            </div>
        </div>
        @endforelse
    </div>

    <!-- Companies Table View (Hidden by default) -->
    <div class="companies-table-view" id="companiesTable" style="display: none;">
        <div class="table-card-premium">
            <div class="table-container-premium">
                <table class="table-premium">
                    <thead>
                        <tr>
                            <th>Entreprise</th>
                            <th>Contact</th>
                            <th>Localisation</th>
                            <th>Employés</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @forelse($entreprises as $entreprise)
                        <tr data-status="{{ $entreprise->is_active ? 'active' : 'inactive' }}">
                            <td>
                                <div class="company-cell">
                                    @if($entreprise->logo)
                                    <img src="{{ asset($entreprise->logo) }}" alt="{{ $entreprise->nom }}" class="company-logo">
                                    @else
                                    <div class="company-logo-placeholder" style="width: 52px; height: 52px; font-size: 1rem;">
                                        {{ strtoupper(substr($entreprise->nom, 0, 2)) }}
                                    </div>
                                    @endif
                                    <div class="company-info">
                                        <span class="company-name">{{ $entreprise->nom }}</span>
                                        @if($entreprise->sigle)
                                        <span class="company-sigle">{{ $entreprise->sigle }}</span>
                                        @endif
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="contact-info">
                                    <span class="contact-email">{{ $entreprise->email }}</span>
                                    @if($entreprise->telephone)
                                    <span class="contact-phone">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                        </svg>
                                        {{ $entreprise->telephone }}
                                    </span>
                                    @endif
                                </div>
                            </td>
                            <td>
                                <div class="location-info">
                                    <span class="location-city">{{ $entreprise->ville ?? '-' }}</span>
                                    <span class="location-country">{{ $entreprise->pays }}</span>
                                </div>
                            </td>
                            <td>
                                <strong style="font-weight: 800; font-size: 1.125rem; color: var(--text-primary);">{{ $entreprise->nombre_employes ?? 'N/A' }}</strong>
                            </td>
                            <td>
                                @if($entreprise->is_active)
                                <span class="badge-premium badge-active">Active</span>
                                @else
                                <span class="badge-premium badge-inactive">Inactive</span>
                                @endif
                            </td>
                            <td>
                                <div class="action-buttons-group">
                                    <a href="{{ route('entreprises.show', $entreprise->id) }}" class="btn-action btn-action-view" title="Voir les détails">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                    </a>
                                    <button type="button" onclick="openEditEntrepriseModal({{ $entreprise->id }})" class="btn-action btn-action-edit" title="Modifier">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                        </svg>
                                    </button>
                                    <form action="{{ route('entreprises.destroy', $entreprise->id) }}" method="POST" style="display: inline-block;" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette entreprise ?');">
                                        @csrf
                                        @method('DELETE')
                                        <button type="submit" class="btn-action btn-action-delete" title="Supprimer">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <polyline points="3 6 5 6 21 6"></polyline>
                                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                            </svg>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        @empty
                        <tr>
                            <td colspan="6">
                                <div class="empty-state-premium">
                                    <div class="empty-icon-wrapper">
                                        <svg class="empty-icon-premium" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                        </svg>
                                    </div>
                                    <h3 class="empty-title-premium">Aucune entreprise enregistrée</h3>
                                    <p class="empty-description-premium">Commencez par créer votre première entreprise</p>
                                    <div class="empty-action">
                                        <button type="button" onclick="openCreateEntrepriseModal()" class="btn-premium btn-premium-primary">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                            </svg>
                                            Créer une entreprise
                                        </button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        @endforelse
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Create/Edit Entreprise Modal Ultra-Premium -->
<div class="modal-overlay" id="entrepriseModal">
    <div class="modal-content-premium" id="entrepriseModalContent">
        <div class="modal-header-premium">
            <div class="modal-header-content">
                <div class="modal-header-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                </div>
                <div>
                    <h2 class="modal-title-premium" id="modalTitle">Nouvelle Entreprise</h2>
                    <p class="modal-subtitle-premium" id="modalSubtitle">Créer une nouvelle entreprise partenaire</p>
                </div>
            </div>
            <button type="button" class="modal-close-premium" onclick="closeEntrepriseModal()" aria-label="Fermer">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <form id="entrepriseForm">
            @csrf
            <input type="hidden" id="entrepriseId" name="entreprise_id">
            <input type="hidden" id="formMethod" name="_method" value="POST">

            <div class="modal-body-premium">
                <!-- Section: Informations de base -->
                <div class="form-section-premium">
                    <h3 class="section-title-premium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        Informations de base
                    </h3>

                    <div class="form-grid-premium">
                        <div class="form-group-premium full-width">
                            <label for="nom" class="form-label-premium required">Nom de l'entreprise</label>
                            <input type="text" id="nom" name="nom" class="form-input-premium" placeholder="Nom complet de l'entreprise" required>
                            <span class="form-error" id="error_nom"></span>
                        </div>
                    </div>

                    <div class="form-grid-premium">
                        <div class="form-group-premium">
                            <label for="sigle" class="form-label-premium">Sigle / Acronyme</label>
                            <input type="text" id="sigle" name="sigle" class="form-input-premium" placeholder="Ex: SARL, SA...">
                            <span class="form-error" id="error_sigle"></span>
                        </div>
                        <div class="form-group-premium">
                            <label for="secteur_activite" class="form-label-premium">Secteur d'activité</label>
                            <input type="text" id="secteur_activite" name="secteur_activite" class="form-input-premium" placeholder="Ex: Technologie, Commerce...">
                            <span class="form-error" id="error_secteur_activite"></span>
                        </div>
                    </div>

                    <div class="form-grid-premium">
                        <div class="form-group-premium full-width">
                            <label for="description" class="form-label-premium">Description</label>
                            <textarea id="description" name="description" class="form-input-premium" rows="3" placeholder="Description détaillée de l'entreprise"></textarea>
                            <span class="form-error" id="error_description"></span>
                        </div>
                    </div>
                </div>

                <!-- Section: Contact -->
                <div class="form-section-premium">
                    <h3 class="section-title-premium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                        Coordonnées
                    </h3>

                    <div class="form-grid-premium">
                        <div class="form-group-premium">
                            <label for="email" class="form-label-premium required">E-mail</label>
                            <input type="email" id="email" name="email" class="form-input-premium" placeholder="contact@entreprise.com" required>
                            <span class="form-error" id="error_email"></span>
                        </div>
                        <div class="form-group-premium">
                            <label for="telephone" class="form-label-premium">Téléphone</label>
                            <input type="text" id="telephone" name="telephone" class="form-input-premium" placeholder="+237 6XX XXX XXX">
                            <span class="form-error" id="error_telephone"></span>
                        </div>
                    </div>

                    <div class="form-grid-premium">
                        <div class="form-group-premium full-width">
                            <label for="site_web" class="form-label-premium">Site web</label>
                            <input type="url" id="site_web" name="site_web" class="form-input-premium" placeholder="https://www.entreprise.com">
                            <span class="form-error" id="error_site_web"></span>
                        </div>
                    </div>
                </div>

                <!-- Section: Localisation -->
                <div class="form-section-premium">
                    <h3 class="section-title-premium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        Localisation
                    </h3>

                    <div class="form-grid-premium">
                        <div class="form-group-premium full-width">
                            <label for="adresse" class="form-label-premium">Adresse</label>
                            <input type="text" id="adresse" name="adresse" class="form-input-premium" placeholder="Adresse complète">
                            <span class="form-error" id="error_adresse"></span>
                        </div>
                    </div>

                    <div class="form-grid-premium">
                        <div class="form-group-premium">
                            <label for="ville" class="form-label-premium">Ville</label>
                            <input type="text" id="ville" name="ville" class="form-input-premium" placeholder="Douala, Yaoundé...">
                            <span class="form-error" id="error_ville"></span>
                        </div>
                        <div class="form-group-premium">
                            <label for="code_postal" class="form-label-premium">Code postal</label>
                            <input type="text" id="code_postal" name="code_postal" class="form-input-premium" placeholder="BP 1234">
                            <span class="form-error" id="error_code_postal"></span>
                        </div>
                    </div>

                    <div class="form-grid-premium">
                        <div class="form-group-premium full-width">
                            <label for="pays" class="form-label-premium required">Pays</label>
                            <input type="text" id="pays" name="pays" class="form-input-premium" placeholder="Cameroun" value="Cameroun" required>
                            <span class="form-error" id="error_pays"></span>
                        </div>
                    </div>
                </div>

                <!-- Section: Informations légales -->
                <div class="form-section-premium">
                    <h3 class="section-title-premium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                        </svg>
                        Informations légales
                    </h3>

                    <div class="form-grid-premium">
                        <div class="form-group-premium">
                            <label for="numero_registre" class="form-label-premium">Numéro de registre</label>
                            <input type="text" id="numero_registre" name="numero_registre" class="form-input-premium" placeholder="RC-XXX-XXXX">
                            <span class="form-error" id="error_numero_registre"></span>
                        </div>
                        <div class="form-group-premium">
                            <label for="numero_fiscal" class="form-label-premium">Numéro fiscal</label>
                            <input type="text" id="numero_fiscal" name="numero_fiscal" class="form-input-premium" placeholder="NIF-XXXXXXXXX">
                            <span class="form-error" id="error_numero_fiscal"></span>
                        </div>
                    </div>

                    <div class="form-grid-premium">
                        <div class="form-group-premium">
                            <label for="nombre_employes" class="form-label-premium">Nombre d'employés</label>
                            <input type="number" id="nombre_employes" name="nombre_employes" class="form-input-premium" placeholder="Ex: 50" min="1">
                            <span class="form-error" id="error_nombre_employes"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer-premium">
                <button type="button" class="btn-cancel-premium" onclick="closeEntrepriseModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                    Annuler
                </button>
                <button type="submit" class="btn-submit-premium" id="submitBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span id="submitBtnText">Créer l'entreprise</span>
                </button>
            </div>
        </form>
    </div>
</div>
@endsection

@section('scripts')
<script>
// View switching
function switchView(view) {
    const gridView = document.getElementById('companiesGrid');
    const tableView = document.getElementById('companiesTable');
    const gridBtn = document.getElementById('gridViewBtn');
    const tableBtn = document.getElementById('tableViewBtn');

    if (view === 'grid') {
        gridView.style.display = 'grid';
        tableView.style.display = 'none';
        gridBtn.classList.add('active');
        tableBtn.classList.remove('active');
        localStorage.setItem('companiesView', 'grid');
    } else {
        gridView.style.display = 'none';
        tableView.style.display = 'block';
        gridBtn.classList.remove('active');
        tableBtn.classList.add('active');
        localStorage.setItem('companiesView', 'table');
    }
}

// Restore view preference
window.addEventListener('DOMContentLoaded', function() {
    const savedView = localStorage.getItem('companiesView') || 'grid';
    switchView(savedView);
});

// Filter companies by status
function filterCompanies(filter) {
    const cards = document.querySelectorAll('.company-card');
    const tableRows = document.querySelectorAll('.table-premium tbody tr');
    const chips = document.querySelectorAll('.filter-chip');

    // Update active chip
    chips.forEach(chip => {
        if (chip.dataset.filter === filter) {
            chip.classList.add('active');
        } else {
            chip.classList.remove('active');
        }
    });

    // Filter grid cards
    cards.forEach(card => {
        if (filter === 'all' || card.dataset.status === filter) {
            card.style.display = '';
        } else {
            card.style.display = 'none';
        }
    });

    // Filter table rows
    tableRows.forEach(row => {
        if (row.querySelector('td[colspan]')) return; // Skip empty state row
        if (filter === 'all' || row.dataset.status === filter) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });
}

// Search functionality
document.getElementById('searchInput')?.addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const cards = document.querySelectorAll('.company-card');
    const tableRows = document.querySelectorAll('.table-premium tbody tr');

    // Search in grid cards
    cards.forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(searchTerm) ? '' : 'none';
    });

    // Search in table rows
    tableRows.forEach(row => {
        if (row.querySelector('td[colspan]')) return; // Skip empty state row
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(searchTerm) ? '' : 'none';
    });
});

// Modal functions
function openCreateEntrepriseModal() {
    const modal = document.getElementById('entrepriseModal');
    if (modal) {
        document.getElementById('entrepriseForm').reset();
        document.getElementById('entrepriseId').value = '';
        document.getElementById('formMethod').value = 'POST';
        document.getElementById('modalTitle').textContent = 'Nouvelle Entreprise';
        document.getElementById('modalSubtitle').textContent = 'Créer une nouvelle entreprise partenaire';
        document.getElementById('submitBtnText').textContent = 'Créer l\'entreprise';
        clearFormErrors();
        modal.classList.add('show');
        document.body.style.overflow = 'hidden';
        setTimeout(() => document.getElementById('nom')?.focus(), 300);
    }
}

function openEditEntrepriseModal(entrepriseId) {
    const modal = document.getElementById('entrepriseModal');
    if (modal) {
        document.getElementById('entrepriseId').value = entrepriseId;
        document.getElementById('formMethod').value = 'PUT';
        document.getElementById('modalTitle').textContent = 'Modifier l\'Entreprise';
        document.getElementById('modalSubtitle').textContent = 'Mettre à jour les informations de l\'entreprise';
        document.getElementById('submitBtnText').textContent = 'Enregistrer les modifications';
        clearFormErrors();
        loadEntrepriseData(entrepriseId);
        modal.classList.add('show');
        document.body.style.overflow = 'hidden';
    }
}

async function loadEntrepriseData(entrepriseId) {
    try {
        const response = await fetch(`/entreprises/${entrepriseId}`, {
            headers: {
                'Accept': 'application/json',
                'X-Requested-With': 'XMLHttpRequest'
            }
        });

        if (response.ok) {
            const data = await response.json();
            const entreprise = data.entreprise || data;

            document.getElementById('nom').value = entreprise.nom || '';
            document.getElementById('sigle').value = entreprise.sigle || '';
            document.getElementById('secteur_activite').value = entreprise.secteur_activite || '';
            document.getElementById('description').value = entreprise.description || '';
            document.getElementById('email').value = entreprise.email || '';
            document.getElementById('telephone').value = entreprise.telephone || '';
            document.getElementById('site_web').value = entreprise.site_web || '';
            document.getElementById('adresse').value = entreprise.adresse || '';
            document.getElementById('ville').value = entreprise.ville || '';
            document.getElementById('code_postal').value = entreprise.code_postal || '';
            document.getElementById('pays').value = entreprise.pays || '';
            document.getElementById('numero_registre').value = entreprise.numero_registre || '';
            document.getElementById('numero_fiscal').value = entreprise.numero_fiscal || '';
            document.getElementById('nombre_employes').value = entreprise.nombre_employes || '';
        }
    } catch (error) {
        console.error('Erreur lors du chargement des données:', error);
        alert('Erreur lors du chargement des données de l\'entreprise');
    }
}

function closeEntrepriseModal() {
    const modal = document.getElementById('entrepriseModal');
    if (modal) {
        modal.classList.remove('show');
        document.body.style.overflow = '';
        setTimeout(() => {
            document.getElementById('entrepriseForm').reset();
            clearFormErrors();
        }, 300);
    }
}

function clearFormErrors() {
    document.querySelectorAll('.form-error').forEach(el => el.textContent = '');
    document.querySelectorAll('.form-input-premium').forEach(el => {
        el.classList.remove('error', 'success');
    });
}

// Form submission
document.getElementById('entrepriseForm')?.addEventListener('submit', async function(e) {
    e.preventDefault();

    const submitBtn = document.getElementById('submitBtn');
    const originalBtnHtml = submitBtn.innerHTML;
    const entrepriseId = document.getElementById('entrepriseId').value;
    const method = document.getElementById('formMethod').value;

    try {
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
            <svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
            </svg>
            ${method === 'PUT' ? 'Enregistrement...' : 'Création en cours...'}
        `;

        clearFormErrors();

        const formData = new FormData(this);
        const url = entrepriseId ? `/entreprises/${entrepriseId}` : '{{ route("entreprises.store") }}';

        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'Accept': 'application/json',
            },
            body: formData
        });

        const data = await response.json();

        if (response.ok && data.success) {
            closeEntrepriseModal();
            showSuccessNotification(data.entreprise, method === 'PUT');
            setTimeout(() => window.location.reload(), 2000);
        } else {
            if (data.errors) {
                Object.keys(data.errors).forEach(field => {
                    const errorEl = document.getElementById(`error_${field}`);
                    const inputEl = document.getElementById(field);

                    if (errorEl && data.errors[field][0]) {
                        errorEl.textContent = data.errors[field][0];
                    }

                    if (inputEl) {
                        inputEl.classList.add('error');
                    }
                });
            } else if (data.message) {
                alert(data.message);
            }

            submitBtn.disabled = false;
            submitBtn.innerHTML = originalBtnHtml;
        }
    } catch (error) {
        console.error('Erreur:', error);
        alert('Une erreur est survenue. Veuillez réessayer.');
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnHtml;
    }
});

function showSuccessNotification(entreprise, isEdit = false) {
    const notification = document.createElement('div');
    notification.className = 'success-notification-entreprise';
    notification.innerHTML = `
        <div class="success-notification-content">
            <div class="success-icon-wrapper">
                <svg class="success-icon" xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9 12l2 2 4-4"></path>
                </svg>
            </div>
            <div class="success-text">
                <h3 class="success-title">${isEdit ? 'Entreprise modifiée' : 'Entreprise créée'}</h3>
                <p class="success-details">
                    <strong>${entreprise.nom}</strong><br>
                    <span class="success-meta">${entreprise.email} • ${entreprise.ville || entreprise.pays}</span>
                </p>
                <p class="success-reload">La page va se recharger...</p>
            </div>
        </div>
        <div class="success-progress"></div>
    `;

    document.body.appendChild(notification);

    setTimeout(() => notification.classList.add('show'), 10);
    setTimeout(() => {
        const progress = notification.querySelector('.success-progress');
        progress.style.width = '0%';
    }, 100);

    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 300);
    }, 1800);
}

// Close modal with Escape key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        const modal = document.getElementById('entrepriseModal');
        if (modal && modal.classList.contains('show')) {
            closeEntrepriseModal();
        }
    }
});

// Close modal by clicking overlay
document.getElementById('entrepriseModal')?.addEventListener('click', (e) => {
    if (e.target.id === 'entrepriseModal') {
        closeEntrepriseModal();
    }
});

// Prevent closing when clicking modal content
document.getElementById('entrepriseModalContent')?.addEventListener('click', (e) => {
    e.stopPropagation();
});

// Real-time validation
document.addEventListener('DOMContentLoaded', function() {
    // Email validation
    const emailInput = document.getElementById('email');
    if (emailInput) {
        emailInput.addEventListener('blur', function() {
            const value = this.value.trim();
            const errorEl = document.getElementById('error_email');

            if (value.length > 0 && !value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                errorEl.textContent = 'Format d\'email invalide';
                this.classList.add('error');
                this.classList.remove('success');
            } else if (value.length > 0) {
                errorEl.textContent = '';
                this.classList.remove('error');
                this.classList.add('success');
            } else {
                errorEl.textContent = '';
                this.classList.remove('error', 'success');
            }
        });
    }

    // URL validation
    const siteWebInput = document.getElementById('site_web');
    if (siteWebInput) {
        siteWebInput.addEventListener('blur', function() {
            const value = this.value.trim();
            const errorEl = document.getElementById('error_site_web');

            if (value.length > 0 && !value.match(/^https?:\/\/.+/)) {
                errorEl.textContent = 'L\'URL doit commencer par http:// ou https://';
                this.classList.add('error');
                this.classList.remove('success');
            } else if (value.length > 0) {
                errorEl.textContent = '';
                this.classList.remove('error');
                this.classList.add('success');
            } else {
                errorEl.textContent = '';
                this.classList.remove('error', 'success');
            }
        });
    }

    // Required fields validation
    ['nom', 'email', 'pays'].forEach(fieldId => {
        const input = document.getElementById(fieldId);
        if (input) {
            input.addEventListener('blur', function() {
                const value = this.value.trim();
                const errorEl = document.getElementById(`error_${fieldId}`);

                if (value.length === 0) {
                    errorEl.textContent = 'Ce champ est requis';
                    this.classList.add('error');
                    this.classList.remove('success');
                } else {
                    errorEl.textContent = '';
                    this.classList.remove('error');
                    if (fieldId !== 'email') {
                        this.classList.add('success');
                    }
                }
            });
        }
    });
});
</script>
@endsection
